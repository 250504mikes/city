import './polyfills.server.mjs';
import{A as m,B as b,C as h,Ca as x,D as p,Da as j,Ea as B,Fa as g,Ga as H,Ha as Y,I as l,Ia as U,J as n,Ja as w,K as i,Ka as W,L as c,La as I,M as u,Ma as d,N as A,Na as P,O as a,Oa as y,P as V,Pa as O,Q as f,Qa as k,Ra as F,Sa as X,Ta as Z,Ua as J,Va as E,Wa as K,Xa as Q,db as $,eb as ee,f as C,fb as oe,gb as D,ha as S,hb as te,ia as G,ib as ne,ja as M,jb as ie,ka as q,kb as re,lb as ae,x as s}from"./chunk-CDFZ7VFO.mjs";var se=e=>({"is-invalid":e});function fe(e,o){e&1&&(n(0,"div"),a(1,"El correo es obligatorio"),i())}function ge(e,o){e&1&&(n(0,"div"),a(1,"El correo no es v\xE1lido"),i())}function ve(e,o){if(e&1&&(n(0,"div",15),p(1,fe,2,0,"div",16)(2,ge,2,0,"div",16),i()),e&2){let t=A();s(),l("ngIf",t.f.correo==null||t.f.correo.errors==null?null:t.f.correo.errors.required),s(),l("ngIf",t.f.correo==null||t.f.correo.errors==null?null:t.f.correo.errors.correo)}}function be(e,o){e&1&&(n(0,"div"),a(1,"La contrase\xF1a es obligatoria"),i())}function xe(e,o){if(e&1&&(n(0,"div",15),p(1,be,2,0,"div",16),i()),e&2){let t=A();s(),l("ngIf",t.f.password==null||t.f.password.errors==null?null:t.f.password.errors.required)}}var N=class e{constructor(o,t,r,v,ye){this.fb=o;this.service=t;this.router=r;this.localStorage=v;this.authService=ye;this.InicioSesionFormulario=this.fb.group({correo:["",[d.required,d.email]],password:["",[d.required]]}),this.localStorage.getItem("accessToken")||this.localStorage.clean()}InicioSesionFormulario;onLoggedin(){if(this.InicioSesionFormulario.invalid){this.InicioSesionFormulario.markAllAsTouched();return}console.log(this.InicioSesionFormulario.value),this.service.Service_Post("user","login",this.InicioSesionFormulario.value).subscribe({next:o=>{if(console.log(o),o.estatus){console.log("\u{1F449} Token recibido del backend:",o.access_token),localStorage.setItem("access_token",o.access_token),console.log("\u2705 access_token guardado en localStorage");let t=o.data?.id_usuario;t!=null?(console.log("\u{1F449} ID de usuario recibido:",t),this.authService.setIdUsuario(t),console.log("\u2705 ID de usuario guardado en AuthService:",t),this.router.navigate(["/home-anunciante",t])):console.warn("\u26A0\uFE0F No se recibi\xF3 el ID del usuario en la respuesta")}else g.fire({icon:"error",title:"Error en el inicio de sesi\xF3n",text:o.mensaje||"Credenciales incorrectas",showConfirmButton:!0})},error:o=>{console.error(o),g.fire({icon:"error",title:"Error de conexi\xF3n",text:"No se pudo conectar con el servidor",showConfirmButton:!0})}})}isValid(o){return!!this.InicioSesionFormulario.get(o)?.invalid&&!!this.InicioSesionFormulario.get(o)?.touched}get f(){return this.InicioSesionFormulario.controls}limpiarFormulario(){this.InicioSesionFormulario.reset({correo:"",password:""})}login(){console.log("inicio"),this.router.navigate(["/login"])}mostrarAlertaOlvido(){g.fire({icon:"info",title:"Funci\xF3n no disponible",text:"Esta funci\xF3n estar\xE1 disponible en una futura versi\xF3n. \xA1Gracias por tu paciencia!",footer:"<i>Estamos trabajando en ello</i>",confirmButtonText:"Entendido",confirmButtonColor:"#3085d6"})}static \u0275fac=function(t){return new(t||e)(m(E),m(w),m(x),m(U),m(B))};static \u0275cmp=b({type:e,selectors:[["app-inicio-sesion"]],standalone:!1,decls:22,vars:9,consts:[[1,"background-slideshow"],[1,"overlay"],[1,"container"],[1,"back-button",3,"click"],[1,"fas","fa-arrow-left"],[1,"title"],[1,"subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],["for","correo"],["type","email","id","correo","formControlName","correo","placeholder","Correo electr\xF3nico",1,"form-control",3,"ngClass"],["class","form-text text-danger",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Contrase\xF1a",1,"form-control",3,"ngClass"],["type","submit",1,"login-button"],[1,"forgot-password",2,"cursor","pointer",3,"click"],[1,"form-text","text-danger"],[4,"ngIf"]],template:function(t,r){t&1&&(c(0,"div",0)(1,"div",1),n(2,"div",2)(3,"button",3),u("click",function(){return r.login()}),c(4,"i",4),i(),n(5,"h1",5),a(6,"Bienvenido"),i(),n(7,"p",6),a(8,"Inicia sesi\xF3n para continuar"),i(),n(9,"form",7),u("ngSubmit",function(){return r.onLoggedin()}),n(10,"label",8),a(11,"Correo electr\xF3nico"),i(),c(12,"input",9),p(13,ve,3,2,"div",10),n(14,"label",11),a(15,"Contrase\xF1a"),i(),c(16,"input",12),p(17,xe,2,1,"div",10),n(18,"button",13),a(19,"Iniciar sesi\xF3n"),i()(),n(20,"p",14),u("click",function(){return r.mostrarAlertaOlvido()}),a(21," \xBFOlvidaste la contrase\xF1a? "),i()()),t&2&&(s(9),l("formGroup",r.InicioSesionFormulario),s(3),l("ngClass",f(5,se,r.isValid("correo"))),s(),l("ngIf",r.f.correo.errors&&r.f.correo.touched),s(3),l("ngClass",f(7,se,r.isValid("password"))),s(),l("ngIf",r.f.password.errors&&r.f.password.touched))},dependencies:[S,M,O,I,P,y,k,F],styles:['@charset "UTF-8";.background-slideshow[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:url(https://static.wixstatic.com/media/80dc52_c8ad68cffa0d464080b9fc7e6a4d1f42~mv2.jpg/v1/fill/w_1073,h_428,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/80dc52_c8ad68cffa0d464080b9fc7e6a4d1f42~mv2.jpg) no-repeat center center fixed;background-size:cover;z-index:-2}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000053;z-index:-1}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:15px;padding:35px;border-radius:12px;background-color:#ffffffd6;box-shadow:0 10px 25px #0000001f;width:380px;max-width:100%;margin:0 auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;transition:transform .6s ease-in-out}.container[_ngcontent-%COMP%]:hover{transform:translate(-50%,calc(-50% - 5px))}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-50%,-50%) scale(.9)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}.container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease-in-out}.back-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;position:absolute;left:15px;top:15px;color:#036;transition:color .3s ease,background-color .3s ease;display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background-color:#0000000d}.back-button[_ngcontent-%COMP%]:hover{color:#007bff;background-color:#0000001a}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#036;margin-bottom:10px}.subtitle[_ngcontent-%COMP%]{margin-bottom:20px;color:#666;font-size:14px}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{text-align:left;margin-top:15px;font-size:14px;color:#333}input[_ngcontent-%COMP%]{padding:10px;margin-top:5px;border:1px solid #ccc;border-radius:8px;background-color:#f5f5f5;font-size:14px;color:#333;transition:border-color .3s ease,box-shadow .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff33;outline:none}input.is-invalid[_ngcontent-%COMP%]{border-color:#e34234;box-shadow:0 0 8px #e3423433}.form-text.text-danger[_ngcontent-%COMP%]{font-size:12px;margin-top:5px;color:#e34234}.login-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:12px;border:none;border-radius:8px;margin-top:20px;cursor:pointer;font-size:16px;transition:background-color .3s ease,transform .2s ease}.login-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.02)}.forgot-password[_ngcontent-%COMP%]{margin-top:15px;color:#007bff;font-size:14px;cursor:pointer;transition:color .3s ease,text-decoration .3s ease}.forgot-password[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}']})};var _=e=>({"is-invalid":e});function _e(e,o){e&1&&(n(0,"div",23),a(1,"El nombre es obligatorio"),i())}function Ce(e,o){e&1&&(n(0,"div",23),a(1,"El apellido paterno es obligatorio"),i())}function he(e,o){e&1&&(n(0,"div",23),a(1,"El apellido materno es obligatorio"),i())}function Se(e,o){e&1&&(n(0,"div",23),a(1,"Correo inv\xE1lido"),i())}function Me(e,o){e&1&&(n(0,"div",23),a(1,"La contrase\xF1a es obligatoria (m\xEDn. 6 caracteres)"),i())}function we(e,o){if(e&1&&(n(0,"option",24),a(1),i()),e&2){let t=o.$implicit;l("value",t.id),s(),V(t.nombre)}}function Ie(e,o){e&1&&(n(0,"div",23),a(1,"El rol es obligatorio"),i())}var R=class e{constructor(o,t,r){this.fb=o;this.router=t;this.service=r;this.registroForm=this.fb.group({nombre:["",d.required],apellidoP:["",d.required],apellidoM:["",d.required],correo:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],id_rol:["",d.required]})}registroForm;roles=[{id:1,nombre:"Usuario"},{id:2,nombre:"Anunciante"},{id:3,nombre:"Administrador"}];registrar(){if(this.registroForm.invalid){this.registroForm.markAllAsTouched();return}let o=this.registroForm.value,t=Number(o.id_rol);if(t===1||t===3){g.fire({icon:"info",title:"Funci\xF3n no disponible",text:"El rol seleccionado a\xFAn no est\xE1 habilitado. Por favor, selecciona otro.",confirmButtonText:"Entendido"});return}else console.log("Enviando JSON al backend:",o),this.service.Service_Post("user","register",o).subscribe({next:r=>{r.estatus?(g.fire("\xA1\xC9xito!","Usuario registrado correctamente","success"),this.router.navigate(["/inicio-sesion"])):g.fire("Error",r.mensaje||"No se pudo registrar el usuario","error")},error:r=>{console.error(r),g.fire("Error","Ocurri\xF3 un error en la conexi\xF3n con el servidor","error")}})}login(){this.router.navigate(["/login"])}get f(){return this.registroForm.controls}isInvalid(o){return this.f[o].invalid&&this.f[o].touched}static \u0275fac=function(t){return new(t||e)(m(E),m(x),m(w))};static \u0275cmp=b({type:e,selectors:[["app-registro"]],standalone:!1,decls:38,vars:26,consts:[[1,"background-slideshow"],[1,"overlay"],[1,"container"],[1,"fas","fa-arrow-left","back-button",3,"click"],[1,"title"],[1,"subtitle"],[1,"register-form",3,"ngSubmit","formGroup"],["for","nombre"],["type","text","id","nombre","placeholder","Nombre","formControlName","nombre",3,"ngClass"],["class","textRequerido",4,"ngIf"],["for","apellidoP"],["type","text","id","apellidoP","placeholder","Apellido","formControlName","apellidoP",3,"ngClass"],["for","apellidoM"],["type","text","id","apellidoM","placeholder","Apellido","formControlName","apellidoM",3,"ngClass"],["for","correo"],["type","email","id","correo","placeholder","Correo","formControlName","correo",3,"ngClass"],["for","password"],["type","password","id","password","placeholder","Contrase\xF1a","formControlName","password",3,"ngClass"],["for","id_rol"],["id","id_rol","formControlName","id_rol",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"register-button"],[1,"textRequerido"],[3,"value"]],template:function(t,r){t&1&&(c(0,"div",0)(1,"div",1),n(2,"div",2)(3,"i",3),u("click",function(){return r.login()}),i(),n(4,"h1",4),a(5,"\xA1Hola!"),i(),n(6,"p",5),a(7,"Crea una nueva cuenta"),i(),n(8,"form",6),u("ngSubmit",function(){return r.registrar()}),n(9,"label",7),a(10,"Nombre(s)"),i(),c(11,"input",8),p(12,_e,2,0,"div",9),n(13,"label",10),a(14,"Apellido Paterno"),i(),c(15,"input",11),p(16,Ce,2,0,"div",9),n(17,"label",12),a(18,"Apellido Materno"),i(),c(19,"input",13),p(20,he,2,0,"div",9),n(21,"label",14),a(22,"Correo"),i(),c(23,"input",15),p(24,Se,2,0,"div",9),n(25,"label",16),a(26,"Contrase\xF1a"),i(),c(27,"input",17),p(28,Me,2,0,"div",9),n(29,"label",18),a(30,"Rol"),i(),n(31,"select",19)(32,"option",20),a(33,"Selecciona un rol"),i(),p(34,we,2,2,"option",21),i(),p(35,Ie,2,0,"div",9),n(36,"button",22),a(37,"Registrarse"),i()()()),t&2&&(s(8),l("formGroup",r.registroForm),s(3),l("ngClass",f(14,_,r.isInvalid("nombre"))),s(),l("ngIf",r.isInvalid("nombre")),s(3),l("ngClass",f(16,_,r.isInvalid("apellidoP"))),s(),l("ngIf",r.isInvalid("apellidoP")),s(3),l("ngClass",f(18,_,r.isInvalid("apellidoM"))),s(),l("ngIf",r.isInvalid("apellidoM")),s(3),l("ngClass",f(20,_,r.isInvalid("correo"))),s(),l("ngIf",r.isInvalid("correo")),s(3),l("ngClass",f(22,_,r.isInvalid("password"))),s(),l("ngIf",r.isInvalid("password")),s(3),l("ngClass",f(24,_,r.isInvalid("id_rol"))),s(3),l("ngForOf",r.roles),s(),l("ngIf",r.isInvalid("id_rol")))},dependencies:[S,G,M,O,Z,J,I,X,P,y,k,F],styles:['@charset "UTF-8";.background-slideshow[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:url(https://imgs.search.brave.com/XG96xVtOsvlc3t1btHIcTKIv3eA3dGDV_yreLYcfpNo/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9lc2Nh/cGFkYXMubWV4aWNv/ZGVzY29ub2NpZG8u/Y29tLm14L3dwLWNv/bnRlbnQvdXBsb2Fk/cy8yMDIxLzAyL1Bh/cnJvcXVpYS1kZS1T/YW4tTWlndWVsLmpw/Zw) no-repeat center center fixed;background-size:cover;z-index:-2}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000053;z-index:-1}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:15px;padding:40px;border-radius:12px;background-color:#ffffffd6;box-shadow:0 10px 25px #0000001f;width:100%;max-width:450px;margin:0 auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;transition:transform .6s ease-in-out}.container[_ngcontent-%COMP%]:hover{transform:translate(-50%,calc(-50% - 5px))}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-50%,-50%) scale(.9)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}.container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .8s ease-in-out}.back-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;position:absolute;left:20px;top:20px;color:#036;transition:color .3s ease,background-color .3s ease;display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background-color:#0000000d}.back-button[_ngcontent-%COMP%]:hover{color:#007bff;background-color:#0000001a}.title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#036;margin-bottom:10px}.subtitle[_ngcontent-%COMP%]{margin-bottom:30px;color:#666;font-size:16px}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{text-align:left;margin-top:15px;font-size:14px;color:#333}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:5px;border:1px solid #ccc;border-radius:8px;background-color:#f5f5f5;font-size:14px;color:#333;transition:border-color .3s ease,box-shadow .3s ease}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 8px #007bff33;outline:none}input.is-invalid[_ngcontent-%COMP%], select.is-invalid[_ngcontent-%COMP%]{border-color:#e34234;box-shadow:0 0 8px #e3423433}.textRequerido[_ngcontent-%COMP%]{color:#e34234;font-size:12px;margin-top:5px}.register-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:14px;border:none;border-radius:8px;margin-top:25px;cursor:pointer;font-size:16px;transition:background-color .3s ease,transform .2s ease;width:100%}.register-button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.02)}@media (max-width: 768px){.container[_ngcontent-%COMP%]{max-width:90%;padding:30px}label[_ngcontent-%COMP%]{font-size:12px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:12px;padding:10px}.register-button[_ngcontent-%COMP%]{font-size:14px;padding:12px}}@media (min-width: 1024px){.container[_ngcontent-%COMP%]{max-width:400px}}']})};var T=class e{constructor(o){this.router=o}login(){console.log("Iniciar sesi\xF3n"),this.router.navigate(["/inicio-sesion"])}register(){console.log("Ir a registro"),this.router.navigate(["/registro"])}homeScreen(){console.log("Navegar como invitado"),this.router.navigate(["/app-home"])}static \u0275fac=function(t){return new(t||e)(m(x))};static \u0275cmp=b({type:e,selectors:[["app-login"]],standalone:!1,decls:15,vars:0,consts:[[1,"background-slideshow"],[1,"overlay"],[1,"container"],[1,"logo"],["src","https://i.imgur.com/EHoiczp.png","alt","logo","width","95","height","95"],[1,"button","login",3,"click"],[1,"button","register",3,"click"],[1,"guest",3,"click"]],template:function(t,r){t&1&&(c(0,"div",0)(1,"div",1),n(2,"div",2)(3,"div",3),c(4,"img",4),i(),n(5,"h1"),a(6,"City Explorer"),i(),n(7,"p"),a(8,"El mejor lugar para recomendaciones"),i(),n(9,"button",5),u("click",function(){return r.login()}),a(10,"Iniciar Sesi\xF3n"),i(),n(11,"button",6),u("click",function(){return r.register()}),a(12,"Registrarse"),i(),n(13,"button",7),u("click",function(){return r.homeScreen()}),a(14,"Navegar como invitado"),i()())},styles:['@charset "UTF-8";.background-slideshow[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:url(https://static.wixstatic.com/media/80dc52_c8ad68cffa0d464080b9fc7e6a4d1f42~mv2.jpg/v1/fill/w_1373,h_428,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/80dc52_c8ad68cffa0d464080b9fc7e6a4d1f42~mv2.jpg) no-repeat center center fixed;background-size:cover;z-index:-2}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000053;z-index:-1}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;gap:15px;padding:35px;border-radius:12px;background-color:#ffffffd6;box-shadow:0 10px 25px #0000001f;width:380px;max-width:100%;margin:0 auto;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1;transition:transform .6s ease-in-out}.container[_ngcontent-%COMP%]:hover{transform:translate(-50%,-52%)}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;box-shadow:none;transition:box-shadow .4s ease-in-out}.container[_ngcontent-%COMP%]:hover   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0000001a}h1[_ngcontent-%COMP%]{margin:10px 0 0;color:#333;font-size:28px;font-weight:600;width:100%}p[_ngcontent-%COMP%]{margin:5px 0 15px;color:#666;font-size:16px;width:100%}.button[_ngcontent-%COMP%]{width:100%;padding:12px;border:none;border-radius:6px;cursor:pointer;font-size:15px;font-weight:500;margin-bottom:10px;transition:all .3s ease-in-out}.login[_ngcontent-%COMP%]{background-color:#00a3bf;color:#fff}.login[_ngcontent-%COMP%]:hover{background-color:#0089a1;transform:translateY(-2px)}.register[_ngcontent-%COMP%]{background-color:#1a73e8;color:#fff}.register[_ngcontent-%COMP%]:hover{background-color:#0d62d1;transform:translateY(-2px)}.guest[_ngcontent-%COMP%]{background:none;border:none;color:#666;text-decoration:none;cursor:pointer;margin-top:5px;font-size:14px;transition:color .3s ease-in-out;padding:5px}.guest[_ngcontent-%COMP%]:hover{color:#1a73e8;text-decoration:underline}@media (max-width: 500px){.container[_ngcontent-%COMP%]{width:80%}}']})};var Pe=[{path:"inicio-sesion",component:N},{path:"registro",component:R},{path:"login",component:T},{path:"app-home",component:ne},{path:"destino-vista",component:te},{path:"categoria-vista/:categoria",component:ee},{path:"categorias",component:oe},{path:"vista-detallada-destino/:id",component:re},{path:"home-anunciante/:id_usuario",component:ie},{path:"crear-actualizar-anuncio",component:D},{path:"crear-actualizar-anuncio/:id",component:D},{path:"vista-detallada-anuncio/:id",component:W},{path:"navbar",component:H},{path:"ayuda",component:Y},{path:"pagar-anuncio/:id_anuncio",component:ae},{path:"",redirectTo:"login",pathMatch:"full"}],L=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=h({type:e});static \u0275inj=C({imports:[j.forChild(Pe),j]})};var pe=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=h({type:e});static \u0275inj=C({imports:[q,K,Q,L,$]})};export{pe as a};
